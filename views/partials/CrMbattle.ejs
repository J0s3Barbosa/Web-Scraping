<script>
  $(document).ready(function () {
    loadEditClashRoyaleBattleData();
    loadClashRoyaleBattleData();
    function loadClashRoyaleBattleData() {
      $.get("/api/v1/clashRoyale/clashs", function (data, status) {
        if (status == "success") {
          var txt = '';
          txt += "<div class='table-responsive'>"
          txt += "<table class='table table-hover '>"
          txt += "<thead>"
          txt += "<tr>"
          txt += "<th>_id</th>"
          txt += "<th>Trophies</th>"
          txt += "<th>Victory</th>"
          txt += "<th>Defeat</th>"
          txt += "<th>Played_at</th>"
          txt += "</thead>"
          txt += "</thead>"
          txt += "<tbody>"
          for (var i = 0; i < data.length; i++) {
            txt += "<tr>"
            txt += "<td><a href='/api/v1/clashRoyale/clash/" + data[i]._id + "/delete' id='btndel' data-id='" + data[i]._id + "'>" + data[i]._id + "</a></td>";
            txt += "<td>" + data[i].Trophies + "</td>";
            txt += "<td>" + data[i].Victory + "</td>";
            txt += "<td>" + data[i].Defeat + "</td>";
            txt += "<td>" + data[i].Played_at + "</td>";
            txt += "</tr>"

          }
          txt += "</tbody>"
          txt += "</table>"
          txt += "</div>"
          document.getElementById("divCrBattledata").innerHTML = txt;

        }

        if (status == "error")
          alert("Error: " + status);
      });

    }

    function loadEditClashRoyaleBattleData() {
      $.get("/api/v1/clashRoyale/clashs", function (data, status) {
        if (status == "success") {
          var txt = '';
          txt += " <form id='myFormEdit2' name='myFormEdit2' action='/api/v1/clashRoyale/clash/' method='PUT' >"
          txt += "<div class='table-responsive'>"
          txt += "<table class='table table-hover '>"
          txt += "<thead>"
          txt += "<tr>"
          txt += "<th>_id</th>"
          txt += "<th>Trophies</th>"
          txt += "<th>Victory</th>"
          txt += "<th>Defeat</th>"
          txt += "<th>Played_at</th>"
          txt += "<th>Actions</th>"
          txt += "</thead>"
          txt += "</thead>"
          txt += "<tbody>"
          for (var i = 0; i < data.length; i++) {
            txt += "<tr>"
              var id2pass = "btnupdate_"+ data[i]._id
            txt += "<td><a href='/api/v1/clashRoyale/clash/" + data[i]._id + "/delete' id='btndel' data-id='" + data[i]._id + "'>" + data[i]._id + "</a></td>";
            txt += "<td> <input type='number' class='form-control' id='Trophies_" + data[i]._id + "' value='" + data[i].Trophies + "'> </td>";
            txt += "<td> <input type='number' class='form-control' id='Victory_" + data[i]._id + "' value='" + data[i].Victory + "'> </td>";
            txt += "<td> <input type='number' class='form-control' id='Defeat_" + data[i]._id + "' value='" + data[i].Defeat + "'> </td>";
            txt += "<td>" + data[i].Played_at + "</td>";
            txt += "<td><button id='btnupdate_" + data[i]._id + "' type='submit' onclick='updateCheck(this);'  value='" + data[i]._id + "' data-id='" + data[i]._id + "' class='btn btn-primary'  '>Save</button></td>";
            txt += "</tr>"

          }
          txt += "</tbody>"
          txt += "</table>"
          txt += "</div>"
          txt += "</form>"
          document.getElementById("divEditCrBattledata").innerHTML = txt;

        }


        if (status == "error")
          alert("Error: " + status);
      });

    }
    $("#btnEditCrBattledata").click(function () {
    loadEditClashRoyaleBattleData();
    });
    $("#btnCrBattledata").click(function () {
      loadClashRoyaleBattleData();
    });
  });

  function updateCheck(e) {
    var data_id = e.value;
    $("#myFormEdit2").attr("action", "/api/v1/clashRoyale/clash/" + data_id);
    var cr_obj_updated = new Object();
    cr_obj_updated._id = data_id;
    cr_obj_updated.Trophies = document.getElementById("Trophies_"+data_id).value;
    cr_obj_updated.Victory = document.getElementById("Victory_"+data_id).value;
    cr_obj_updated.Defeat = document.getElementById("Defeat_"+data_id).value;
    $.ajax({
      type: 'PUT',
      url: '/api/v1/clashRoyale/clash/' + data_id,
      data: cr_obj_updated,  
      success: function (data) {
        // alert(JSON.stringify(data));
      window.location.reload();
      }
    });
  }
</script>

<div class="panel panel-default">
  <div class="panel-body">

    <h2>Data from 'Battles' </h2>
    <div id="divCrBattledata">
    </div>

    <button id="btnCrBattledata" class="btn btn-primary">Load Data</button>

  </div>
</div>

<div class="panel panel-default">
  <div class="panel-body">

    <h2>Edit Data from 'Battles' </h2>
    <div id="divEditCrBattledata"> </div>

    <button id="btnEditCrBattledata" class="btn btn-primary">Load Data</button>

  </div>
</div>